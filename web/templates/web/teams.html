{% extends "web/base.html" %}
{% block title %}Teams â€” NLL Fantasy{% endblock %}
{% block content %}
  <div class="w-full flex flex-wrap gap-4 justify-center my-4">
    {% for item in teams %}
      <div class="flex justify-center w-full sm:w-auto">
        <a href="/teams/{{ item.team.id }}/"
           class="flex text-gray-100 justify-center transition duration-200 ease-in-out transform px-4 py-2 w-48 border-b-4 border-gray-500 hover:border-b-2 bg-gradient-to-t from-gray-400 via-gray-600 to-gray-200 rounded-2xl hover:translate-y-px"
           style="-webkit-box-shadow: 0px 10px 13px -7px #000000, 5px 5px 15px 8px rgba(0,0,0,0); box-shadow: 0px 10px 13px -7px #000000, 5px 5px 15px 5px rgba(0,0,0,0);">
          <span class="font-bold text-center">{{ item.team.name }}</span>
        </a>
      </div>
    {% endfor %}
  </div>
  {% if teams %}
    <nav class="team-tabs">
      <ul>
        {% for item in teams %}
          <li><a href="#team-{{ item.team.id }}">{{ item.team.name }}</a></li>
        {% endfor %}
      </ul>
    </nav>

    {% for item in teams %}
      <section id="team-{{ item.team.id }}" class="team-panel border-2 border-gray-300 rounded-lg p-6 mb-6 shadow-md bg-white">
        <h2>{{ item.team.name }}</h2>
        {% if item.players %}
          <table class="players-table w-full">
            <thead>
              <tr>
                <th class="text-left px-4 py-2">Name</th>
                <th class="text-center px-3 py-2">#</th>
                <th class="text-center px-3 py-2">Pos</th>
                <th class="text-right px-4 py-2">Total FPTS</th>
              </tr>
            </thead>
            <tbody>
              {% for pitem in item.players %}
                {% with player=pitem.player stat=pitem.latest_stat %}
                <tr>
                  <td class="text-left px-4 py-2">{{ player.last_name }}, {{ player.first_name }}</td>
                  <td class="text-center px-3 py-2">{{ player.number }}</td>
                  <td class="text-center px-3 py-2">{{ player.get_position_display }}</td>
                  <td class="text-right px-4 py-2 font-bold text-blue-600">{{ pitem.total_fantasy_points|default:"0" }}</td>
                </tr>
                {% endwith %}
              {% endfor %}
            </tbody>
          </table>
        {% else %}
          <p>No players assigned to this team yet.</p>
        {% endif %}
      </section>
    {% endfor %}
  {% else %}
    <p>No teams found. Import your teams CSV to add teams.</p>
  {% endif %}
{% endblock %}